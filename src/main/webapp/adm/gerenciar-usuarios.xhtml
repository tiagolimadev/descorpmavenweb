<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/layout/template.xhtml">
    <ui:define name="conteudo">
        <h:form id="usuariosForm">

            <div class="row">
                <div class="col-md-12">
                    <p:commandButton  value="Adicionar Usuário" update="usuariosForm"/>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">

                    <p:dataTable id="listaUsuarios" value="#{administradorBean.listaUsuarios}" var="usuario" rowKey="#{usuario.id}">
                        <p:column headerText="Nome">
                            <h:outputText value="#{usuario.nome}" />
                        </p:column>
                        <p:column headerText="Email">
                            <h:outputText value="#{usuario.email}" />
                        </p:column>
                        <p:column headerText="Perfil">
                            <h:outputText value="#{usuario.tipo}" />
                        </p:column>
                        <p:column headerText="Ações">
                            <p:commandButton action="#{administradorBean.initVisualizarUsuario(usuario)}" oncomplete="PF('dlgVisualizar').show();" value="Visualizar" update="usuariosForm" />
                        </p:column>
                    </p:dataTable>

                </div>
            </div>

            <p:dialog header="Detalhes" widgetVar="dlgVisualizar" closeOnEscape="true" resizable="false">/
                <div>Nome: <h:outputText value="#{administradorBean.usuarioSelecionado.nome}" /></div>
                <div>CPF: <h:outputText value="#{administradorBean.usuarioSelecionado.cpf}" /></div>
                <div>Data Nasc.: <h:outputText value="#{administradorBean.usuarioSelecionado.dataNascimento}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText> - Idade: <h:outputText value="#{administradorBean.usuarioSelecionado.idade}" /> anos</div>
                <div>E-mail: <h:outputText value="#{administradorBean.usuarioSelecionado.email}" /></div>
                <div>Perfil: <h:outputText value="#{administradorBean.usuarioSelecionado.tipo}" /></div>
            </p:dialog> 

        </h:form>
    </ui:define>
</ui:composition>