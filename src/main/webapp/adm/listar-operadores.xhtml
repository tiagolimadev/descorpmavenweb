<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>GerenciaWeb | Listar Operadores</title>
        <link rel="stylesheet" href="../css/materialize.min.css" />
        <link rel="stylesheet" href="../css/custom.css" />
    </h:head>
    <h:body>

        <h:form id="listaOperadoresForm">

            <p:growl id="growl" autoUpdate="true" />
            
            <!-- Button Add Operador -->
            <p:panelGrid id="addOper">
                <p:commandButton action="#{operadorBean.initOperador()}" oncomplete="PF('dlgCadOper').show();" icon="fa fa-fw fa-plus" value="Novo Operador" update="formCadastrar" immediate="true" />
            </p:panelGrid>

            <!-- Form Datatable -->
            <p:panelGrid id="formDatatable" columns="2">

                <p:dataTable id="listaOperadores" value="#{operadorBean.listaOperadores}" var="operador" rowKey="#{operador.id}"
                             paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                             rows="#{operadorBean.linhas}">
                    <p:column headerText="Nome" sortBy="#{operador.nome}">
                        <h:outputText value="#{operador.nome}" />
                    </p:column>
                    <p:column headerText="E-mail" sortBy="#{operador.email}">
                        <h:outputText value="#{operador.email}" />
                    </p:column>
                    <p:column headerText="Login" filterBy="#{operador.login}">
                        <h:outputText value="#{operador.login}" />
                    </p:column>
                    <p:column headerText="Senha" sortBy="#{operador.senha}">
                        <h:outputText value="#{operador.senha}">
                        </h:outputText>
                    </p:column>
                    <p:column headerText="CPF" sortBy="#{operador.cpf}">
                        <h:outputText value="#{operador.cpf}">
                            <f:converter converterId="CPFConverter" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Data Nascimento" sortBy="#{operador.dataNascimento}">
                        <h:outputText value="#{operador.dataNascimento}">
                            <f:converter converterId="DataNascConverter" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Ações">
                        <p:commandButton action="#{operadorBean.selecionarOperador(operador)}" oncomplete="PF('dlgEditOper').show();" value="Editar" icon="fa fa-fw fa-edit" update="atualizarForm" />
                        <p:commandButton action="#{operadorBean.selecionarOperador(operador)}" oncomplete="PF('confRemOper').show();" value="Remover" icon="fa fa-fw fa-remove" />
                    </p:column>
                </p:dataTable>

            </p:panelGrid>
        </h:form>

        <h:form id="formCadastrar">
            <!-- Dialog Cadastrar Operador -->
            <p:dialog header="Cadastrar Operador" widgetVar="dlgCadOper" modal="true" closeOnEscape="true" resizable="false">
                <div class="row">
                    <h:outputLabel for="nomeCad">Nome</h:outputLabel>
                    <p:inputText id="nomeCad" type="text" label="nomeCad" value="#{operadorBean.operador.nome}" />
                </div>
                <div class="row">
                    <h:outputLabel for="emailCad">Email</h:outputLabel>
                    <p:inputText id="emailCad" type="email" label="emailCad" value="#{operadorBean.operador.email}" />
                </div>
                <div class="row">
                    <h:outputLabel for="cpfCad">CPF</h:outputLabel>
                    <p:inputMask id="cpfCad" mask="999.999.999-99" label="cpfCad" value="#{operadorBean.operador.cpf}" />
                </div>
                <div class="row">
                    <h:outputLabel for="dataNascCad">Data Nascimento</h:outputLabel>
                    <p:inputText id="dataNascCad" type="date" label="dataNascCad" value="#{operadorBean.operador.dataNascimento}">
                        <f:convertDateTime pattern="yyyy-MM-dd" />
                    </p:inputText>
                </div>
                <div class="row">
                    <h:outputLabel for="loginCad">Login</h:outputLabel>
                    <p:inputText id="loginCad" type="text" label="loginCad" value="#{operadorBean.operador.login}" />
                </div>
                <div class="row">
                    <h:outputLabel for="senhaCad">Senha</h:outputLabel>
                    <p:password id="senhaCad" label="senhaCad" value="#{operadorBean.operador.senha}"></p:password>
                </div>
                <p:commandButton action="#{operadorBean.cadastrarOperador()}" oncomplete="PF('dlgCadOper').hide();" value="Cadastrar" icon="fa fa-fw fa-save" update="listaOperadoresForm" />
                <p:commandButton value="Cancelar" onclick="PF('dlgCadOper').hide();" type="button" />
            </p:dialog>
        </h:form>

        <h:form id="atualizarForm">
            <!-- Dialog Editar Operador -->
            <p:dialog header="Editar Operador" widgetVar="dlgEditOper" modal="true" closeOnEscape="true" resizable="false">
                <div class="row">
                    <h:outputLabel for="nomeEdit">Nome</h:outputLabel>
                    <p:inputText id="nomeEdit" type="text" label="nomeEdit" value="#{operadorBean.operador.nome}" />
                </div>
                <div class="row">
                    <h:outputLabel for="emailEdit">Email</h:outputLabel>
                    <p:inputText id="emailEdit" type="email" label="emailEdit" value="#{operadorBean.operador.email}" />
                </div>
                <div class="row">
                    <h:outputLabel for="cpfEdit">CPF</h:outputLabel>
                    <p:inputMask id="cpfEdit" mask="999.999.999-99" label="cpfEdit" value="#{operadorBean.operador.cpf}" />
                </div>
                <div class="row">
                    <h:outputLabel for="dataNascEdit">Data Nascimento</h:outputLabel>
                    <p:inputText id="dataNascEdit" type="date" label="dataNascEdit" value="#{operadorBean.operador.dataNascimento}">
                        <f:convertDateTime pattern="yyyy-MM-dd" />
                    </p:inputText>
                </div>
                <div class="row">
                    <h:outputLabel for="loginEdit">Login</h:outputLabel>
                    <p:inputText id="loginEdit" type="text" label="loginEdit" value="#{operadorBean.operador.login}" />
                </div>
                <div class="row">
                    <h:outputLabel for="senhaEdit">Senha</h:outputLabel>
                    <p:password id="senhaEdit" label="senhaEdit" value="#{operadorBean.operador.senha}"></p:password>
                </div>
                <p:commandButton action="#{operadorBean.atualizarOperador()}" oncomplete="PF('dlgEditOper').hide();" value="Atualizar" icon="fa fa-fw fa-edit" update="listaOperadoresForm" />
                <p:commandButton value="Cancelar" onclick="PF('dlgEditOper').hide();" type="button" />
            </p:dialog>
        </h:form>
        <h:form id="removerForm">
            <!-- ConfirmDialog Remoção de Operador -->
            <p:confirmDialog message="Tem certeza que deseja remover o operador?"
                             header="Confirmação de Remoção de Operador" severity="alert"
                             widgetVar="confRemOper" closeOnEscape="true">
                <p:commandButton value="Sim" action="#{operadorBean.removerOperador()}" oncomplete="PF('confRemOper').hide()" update="listaOperadoresForm" />
                <p:commandButton value="Não" onclick="PF('confRemOper').hide();" type="button" />
            </p:confirmDialog>
        </h:form>

    </h:body>
</html>
